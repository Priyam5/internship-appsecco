


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.7">
    
    
      
        <title>Deployment of SuiteCRM - DevSecOps</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.b8ac9624.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deployment-of-suitecrm" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="DevSecOps" class="md-header-nav__button md-logo" aria-label="DevSecOps">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            DevSecOps
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Deployment of SuiteCRM
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DevSecOps" class="md-nav__button md-logo" aria-label="DevSecOps">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    DevSecOps
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contents/" title="Contents" class="md-nav__link">
      Contents
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../problem-statement/" title="Problem Statement" class="md-nav__link">
      Problem Statement
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Ubuntu-server-VM-setup/" title="Setup of VMs" class="md-nav__link">
      Setup of VMs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Jenkins-installation/" title="Setup of Jenkins" class="md-nav__link">
      Setup of Jenkins
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../mkdocs-setup-usage/" title="MkDocs setup for report" class="md-nav__link">
      MkDocs setup for report
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../setting-up-pipeline/" title="Setting Up Pipeline" class="md-nav__link">
      Setting Up Pipeline
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../setting-up-suitecrm/" title="Set Up SuiteCRM" class="md-nav__link">
      Set Up SuiteCRM
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Deployment of SuiteCRM
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Deployment of SuiteCRM" class="md-nav__link md-nav__link--active">
      Deployment of SuiteCRM
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objective" class="md-nav__link">
    Objective
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jenkins-pipeline-project-created" class="md-nav__link">
    Jenkins pipeline project created
  </a>
  
    <nav class="md-nav" aria-label="Jenkins pipeline project created">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jenkinsfile" class="md-nav__link">
    Jenkinsfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-stages-of-pipeline" class="md-nav__link">
    The stages of pipeline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-stage-permission-denied" class="md-nav__link">
    Build Stage - Permission denied
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suitecrm-web-page" class="md-nav__link">
    SuiteCRM Web Page
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objective" class="md-nav__link">
    Objective
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jenkins-pipeline-project-created" class="md-nav__link">
    Jenkins pipeline project created
  </a>
  
    <nav class="md-nav" aria-label="Jenkins pipeline project created">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jenkinsfile" class="md-nav__link">
    Jenkinsfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-stages-of-pipeline" class="md-nav__link">
    The stages of pipeline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-stage-permission-denied" class="md-nav__link">
    Build Stage - Permission denied
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suitecrm-web-page" class="md-nav__link">
    SuiteCRM Web Page
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="deployment-of-suitecrm">Deployment of SuiteCRM</h1>
<h2 id="objective">Objective</h2>
<p>This section aims to set up a basic pipeline in Jenkins to provide a solution to the 1st, 2nd, 5th and 6th points of the problem statement under Task 1.</p>
<h2 id="jenkins-pipeline-project-created">Jenkins pipeline project created</h2>
<p>I set up Jenkins as mentioned in the Setup of Jenkins section. For building a pipeline for Maven project. I clicked on New Item from the main dashboard which leads me to a different page. I gave <code>suitecrm-pipeline</code> as the project's name and chose <code>Pipeline</code> as the project type amongst all the options present.</p>
<p>Next came the project configurations page. Here:</p>
<ul>
<li>
<p>Under General section:</p>
<ul>
<li>I gave a brief description of the application being deployed and the purpose of this pipeline.</li>
<li>I also checked the GitHub Project option and provided the GitHub URL for the project's repository. This option allowed Jenkins to know where to fetch the project from.</li>
</ul>
</li>
<li>
<p>Under Build Triggers section:</p>
<ul>
<li>I checked the <code>GitHub hook trigger for GITScm Polling</code> option to allow automated builds based on webhook triggers on GitHub for selected events.</li>
</ul>
</li>
<li>
<p>Under <code>Pipeline</code> section:</p>
<ul>
<li>For Definition, I chose <code>Pipeline Script</code> option and written the pipeline code in the <code>script</code> section.</li>
</ul>
</li>
</ul>
<p>Then, I clicked on save to save the configurations made.</p>
<h3 id="jenkinsfile">Jenkinsfile</h3>
<p>I have explained about Jenkinsfile in <a href="https://intern-appsecco.netlify.app/setting-up-pipeline/">Setting Up Pipeline</a> section.</p>
<p>The following are the contents of the Jenkinsfile which executes the pipeline:</p>
<pre><code>pipeline {
    agent any

    stages {
        stage('git') {
            steps {
                git url: 'https://github.com/Priyam5/SuiteCRM.git/'
            }
        }

        stage ('Build') {
            steps {
                sh 'composer install'
            }
        }
        stage ('Deploying App to production server'){
            steps {
                sh 'echo &quot;Deploying App to production Server&quot;'
                sh 'ssh -o StrictHostKeyChecking=no production@192.168.1.4 &quot;rm -rf suitecrm &amp;&amp; mkdir suitecrm&quot;'
                sh 'scp -r * production@192.168.1.4:~/suitecrm'
                sh 'ssh -o StrictHostKeyChecking=no production@192.168.1.4 &quot;cd suitecrm &amp;&amp; cp -r * /home/production/html/suitecrm&quot;'
            }
        }
    }
}
</code></pre>

<h3 id="the-stages-of-pipeline">The stages of pipeline</h3>
<ul>
<li>
<p><strong>git :</strong> 
In this stage git repository of SuiteCRM is cloned. </p>
</li>
<li>
<p><strong>Build :</strong>
In the build stage, application is built and dependencies are installed using  <code>composer install</code> in the build stage on the Jenkins VM. This loads all the dependencies that the app (SuiteCRM) requires.</p>
</li>
<li>
<p><strong>Deploying App to production server:</strong> 
In this stage, the files are deployed from Jenkins to production VM and also removed the files of suitecrm from production server as it might cause conflict in between the files.</p>
</li>
</ul>
<h3 id="build-stage-permission-denied">Build Stage - Permission denied</h3>
<p>In the build stage, I was getting an error for permission denied for the folder was not getting deleted and permission denied for regular files not being created.</p>
<p>So to solve this I followed this <a href="https://www.digitalocean.com/community/tutorials/how-to-move-an-apache-web-root-to-a-new-location-on-ubuntu-16-04">documentation</a></p>
<ul>
<li>I changed root directory to home directory as the document root was set to /var/www/html. It was configured in the following file: </li>
</ul>
<pre><code>/etc/apache2/sites-enabled/000-default.conf
</code></pre>

<p>So I run this command to make the changes in the nano file. </p>
<pre><code>sudo nano /etc/apache2/sites-enabled/000-default.conf
</code></pre>

<p>I changed it to /home/production/html/suitecrm</p>
<p>Created file suitecrm under /home/production/html</p>
<p>Made changes in the last path in Jenkinsfile to /home/production/html/suitecrm</p>
<p>Click On Save and then build it was successfully build this time.</p>
<h3 id="suitecrm-web-page">SuiteCRM Web Page</h3>
<p>When I opened the webpage  <code>http://192.168.1.4/suitecrm/install.php</code> there it showed to set the <code>session.save_path</code>. So I changed it from this <code>session.save_path = "var/www/html/suitecrm/"</code> to <code>session.save_path = "tmp"</code> by going in the file:</p>
<pre><code>sudo nano /etc/php/7.2/apache2/php.ini
</code></pre>

<p>This was displayed when I opened the webpage again:</p>
<pre><code>Component Status
Writeable Custom Directory The Custom Directory exists but is not writeable. You may have to change permissions on it (chmod 766) or right click on it and uncheck the read only option, depending on your Operating System. Please take the needed steps to make the file writeable.
Writable Cache Sub-Directories The files or directories listed below are not writeable or are missing and cannot be created. Depending on your Operating System, correcting this may require you to change permissions on the files or parent directory (chmod 755), or to right click on the parent directory and uncheck the ‘read only’ option and apply it to all subfolders.
Please fix the following files or directories before proceeding:
/home/bro303/public_html/crm/cache/images
/home/bro303/public_html/crm/cache/layout
/home/bro303/public_html/crm/cache/pdf
/home/bro303/public_html/crm/cache/xml
/home/bro303/public_html/crm/cache/include/javascript
</code></pre>

<p>I ran these commands to set the following recommended permissions on SuiteCRM instance:</p>
<pre><code>sudo chown -R www-data:www-data .

sudo chmod -R 755 .

sudo chmod -R 775 cache custom modules themes data upload config_override.php
</code></pre>

<p>After this the web page opened for making the configurations of database and Site.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../setting-up-suitecrm/" title="Set Up SuiteCRM" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Set Up SuiteCRM
              </div>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.d1f5a259.min.js"></script>
      <script src="../assets/javascripts/bundle.d5fec882.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.fae956e7.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>