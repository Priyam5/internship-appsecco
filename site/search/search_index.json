{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Introduction Project Title: DevSecOps | Strategey, Implimentation Author: Priyam Singh Mentor: Akash Mahajan , Sunesh Govindaraj , Ayush Priya The report documents the tasks I am working and practising as a part of my internship at Appsecco to impliment DevSecOps as well as the issues I am facing while working, and how I resolved them.","title":"Introduction"},{"location":"#introduction","text":"Project Title: DevSecOps | Strategey, Implimentation Author: Priyam Singh Mentor: Akash Mahajan , Sunesh Govindaraj , Ayush Priya The report documents the tasks I am working and practising as a part of my internship at Appsecco to impliment DevSecOps as well as the issues I am facing while working, and how I resolved them.","title":"Introduction"},{"location":"Jenkins-installation/","text":"Jenkins Installation Objective The aim of this section is to set up the required infrastructure of Jenkins to perform the task and solve the 2nd point of the problem statement under Task 1. What is Jenkins? Jenkins is a self-contained, open source automation server which can be used to automate all sorts of tasks related to building, testing,and delivering or deploying software . Jenkins can be installed through native system packages, Docker, or even run standalone by any machine with a Java Runtime Environment (JRE) installed. Prerequisite: VM should be installed with Ubuntu 18.04 server for Installing Jenkins go to Debian/Ubuntu section. Java 8 to be installed, by this link specific versions of OpenJDK on Ubuntu 18.04. I decided to go with this documentation as it was concise. Begin with the installation steps of Jenkins. STEP 1 - Installing Jenkins First, add the repository key to the system: wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add - The system will return OK Next, append the Debian package repository address sudo sh -c 'echo deb https://pkg.jenkins.io/debian-stable binary/ > \\ /etc/apt/sources.list.d/jenkins.list' sudo apt update Finally, install Jenkins ans its dependencies: sudo apt install jenkins Step 2 \u2014 Starting Jenkins I started Jenkins using systemctl command because systemctl is used to examine and control the state of \u201csystemd\u201d system and service manager.: sudo systemctl start jenkins Since systemctl doesn\u2019t display output,I am using its status command to verify that Jenkins started successfully: sudo systemctl status jenkins If it's successfully installed, the beginning of the output should show that the service is active and configured to start for boot. The Jenkins is running now. To reach it from a web browser I will adjust the firewall rules to complete the initial setup. Step 3 - Opening the Firewall By default, Jenkins runs on port 8080, opening that port using ufw(Uncomplicated Firewall ): sudo ufw allow 8080 To check the ufw's status confirm the new rules: sudo ufw status Note: If the status shows inactive. Then enable the firewall by following the following commands that will OpenSSH sudo ufw allow OpenSSH sudo ufw enable Step 4 \u2014 Setting Up Jenkins Find the IP of your system: ifconfig To complete setup, in the browser I entered http://your_server_ip_or_domain:8080 The Unlock Jenkins screen opens,which will display where initial password would be stored. In the terminal window I will use the cat command to display the password: sudo cat /var/lib/jenkins/secrets/initialAdminPassword The 32-character alphanumeric password is displayed in the terminal, paste it into the Administrator password field, then click Continue . Installing suggested plugins I clicked the Install suggested plugins option, which will immediately begin the installation process as shown: Once the installation completes, the screen opens to Create First Admin User , I filled the required details. click on Save and Continue or select Continue as admin to skip the above step and continue as admin using the initial password used above. The Instance Configuration page will be displayed which will ask to confirm the preferred URL for Jenkins instance. Confirm the appropriate information, click Save and Finish . A confirmation page confirming that Jenkins is Ready! Click Start using Jenkins to visit the main Jenkins dashboard. Here finish the installation of Jenkins in VM. Errors resolved There were few errors which I faced during the installation. GPG key error: A LTS (Long-Term Support) release is chosen every 12 weeks from the stream of regular releases as the stable release for that time period. The link gets updated, it gives GPG key error so find the latest link from here under the Debian/Ubuntu section. Certificate verification failed To resolve this pass --no-check-certificate as shown below: wget https://ftp.yz.yamagata-u.sc.jp/pub/misc/jenkins/debian-stable/jenkins_2.235_all.deb --no-check-certificate Again reinstall the debian file of jenkins: sudo dpkg -i jenkins_2.235.5_all.deb To fix the broken packages run: sudo apt install -f Now again I check the status of jenkins: sudo service jenkins status It SHOWS its active now. Invalid user or password Once logged in successfully into Jenkins VM (Virtual Machine). Go to directory Jenkins and open file config.xml . sudo nano /var/lib/Jenkins/config.xml This command will open config.xml file as below: Go to tag and check value, it will be true . You need to update tag value to false as below. Save this file. Once you are done with updating value in config.xml file. Restart Jenkins service. sudo service jenkins restart It will show the status active . Now on opening Jenkins URL. It will go to dashboard direct. No credentials required. After opening dashboard Logged in user section will be blank. As it is now Anonymous user . To reset all security options, go to Jenkins -> Manage Jenkins option in left hand side option lists. Go to Configure Global Security option Enable Enable Security option. In Security Realm Option Select Jenkins own database option. Unselect / Untick Allow users to sign up option under Jenkins own database option. In Authorization section do following changes : Select Logged-in users can do anything option (Tick). Unselect / Untick Allow anonymous read access option under Logged-in users can do anything option. Click Save button. You will be redirected to Create First Admin User page once you click on Save button. Once you fill all the details, click on Create First Admin User button You will be ready with new Admin users to login again into Jenkins portal.","title":"Setup of Jenkins"},{"location":"Jenkins-installation/#jenkins-installation","text":"","title":"Jenkins Installation"},{"location":"Jenkins-installation/#objective","text":"The aim of this section is to set up the required infrastructure of Jenkins to perform the task and solve the 2nd point of the problem statement under Task 1. What is Jenkins? Jenkins is a self-contained, open source automation server which can be used to automate all sorts of tasks related to building, testing,and delivering or deploying software . Jenkins can be installed through native system packages, Docker, or even run standalone by any machine with a Java Runtime Environment (JRE) installed.","title":"Objective"},{"location":"Jenkins-installation/#prerequisite","text":"VM should be installed with Ubuntu 18.04 server for Installing Jenkins go to Debian/Ubuntu section. Java 8 to be installed, by this link specific versions of OpenJDK on Ubuntu 18.04. I decided to go with this documentation as it was concise. Begin with the installation steps of Jenkins.","title":"Prerequisite:"},{"location":"Jenkins-installation/#step-1-installing-jenkins","text":"First, add the repository key to the system: wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add - The system will return OK Next, append the Debian package repository address sudo sh -c 'echo deb https://pkg.jenkins.io/debian-stable binary/ > \\ /etc/apt/sources.list.d/jenkins.list' sudo apt update Finally, install Jenkins ans its dependencies: sudo apt install jenkins","title":"STEP 1 - Installing Jenkins"},{"location":"Jenkins-installation/#step-2-starting-jenkins","text":"I started Jenkins using systemctl command because systemctl is used to examine and control the state of \u201csystemd\u201d system and service manager.: sudo systemctl start jenkins Since systemctl doesn\u2019t display output,I am using its status command to verify that Jenkins started successfully: sudo systemctl status jenkins If it's successfully installed, the beginning of the output should show that the service is active and configured to start for boot. The Jenkins is running now. To reach it from a web browser I will adjust the firewall rules to complete the initial setup.","title":"Step 2 \u2014 Starting Jenkins"},{"location":"Jenkins-installation/#step-3-opening-the-firewall","text":"By default, Jenkins runs on port 8080, opening that port using ufw(Uncomplicated Firewall ): sudo ufw allow 8080 To check the ufw's status confirm the new rules: sudo ufw status Note: If the status shows inactive. Then enable the firewall by following the following commands that will OpenSSH sudo ufw allow OpenSSH sudo ufw enable","title":"Step 3 - Opening the Firewall"},{"location":"Jenkins-installation/#step-4-setting-up-jenkins","text":"Find the IP of your system: ifconfig To complete setup, in the browser I entered http://your_server_ip_or_domain:8080 The Unlock Jenkins screen opens,which will display where initial password would be stored. In the terminal window I will use the cat command to display the password: sudo cat /var/lib/jenkins/secrets/initialAdminPassword The 32-character alphanumeric password is displayed in the terminal, paste it into the Administrator password field, then click Continue . Installing suggested plugins I clicked the Install suggested plugins option, which will immediately begin the installation process as shown: Once the installation completes, the screen opens to Create First Admin User , I filled the required details. click on Save and Continue or select Continue as admin to skip the above step and continue as admin using the initial password used above. The Instance Configuration page will be displayed which will ask to confirm the preferred URL for Jenkins instance. Confirm the appropriate information, click Save and Finish . A confirmation page confirming that Jenkins is Ready! Click Start using Jenkins to visit the main Jenkins dashboard. Here finish the installation of Jenkins in VM.","title":"Step 4 \u2014 Setting Up Jenkins"},{"location":"Jenkins-installation/#errors-resolved","text":"There were few errors which I faced during the installation. GPG key error: A LTS (Long-Term Support) release is chosen every 12 weeks from the stream of regular releases as the stable release for that time period. The link gets updated, it gives GPG key error so find the latest link from here under the Debian/Ubuntu section. Certificate verification failed To resolve this pass --no-check-certificate as shown below: wget https://ftp.yz.yamagata-u.sc.jp/pub/misc/jenkins/debian-stable/jenkins_2.235_all.deb --no-check-certificate Again reinstall the debian file of jenkins: sudo dpkg -i jenkins_2.235.5_all.deb To fix the broken packages run: sudo apt install -f Now again I check the status of jenkins: sudo service jenkins status It SHOWS its active now. Invalid user or password Once logged in successfully into Jenkins VM (Virtual Machine). Go to directory Jenkins and open file config.xml . sudo nano /var/lib/Jenkins/config.xml This command will open config.xml file as below: Go to tag and check value, it will be true . You need to update tag value to false as below. Save this file. Once you are done with updating value in config.xml file. Restart Jenkins service. sudo service jenkins restart It will show the status active . Now on opening Jenkins URL. It will go to dashboard direct. No credentials required. After opening dashboard Logged in user section will be blank. As it is now Anonymous user . To reset all security options, go to Jenkins -> Manage Jenkins option in left hand side option lists. Go to Configure Global Security option Enable Enable Security option. In Security Realm Option Select Jenkins own database option. Unselect / Untick Allow users to sign up option under Jenkins own database option. In Authorization section do following changes : Select Logged-in users can do anything option (Tick). Unselect / Untick Allow anonymous read access option under Logged-in users can do anything option. Click Save button. You will be redirected to Create First Admin User page once you click on Save button. Once you fill all the details, click on Create First Admin User button You will be ready with new Admin users to login again into Jenkins portal.","title":"Errors resolved"},{"location":"Ubuntu-server-VM-setup/","text":"Setting up VM Objective The aim of this section is to set up the required infrastructure to perform the task and solve the 1st point of the problem statement under Task 1. In this section I will be setting up two VMs: 1. For jenkins deployment. 2. For production Server to deploy the application (Odoo) on the server Steps for creating VM: Click on the NEW icon to create a new machine. Create Virtual Machine window will open as shown in the picture. Configure * The Name Jenkins-infra. * The Type to Linux. * Version to Ubuntu (64-bit). * Allocate memory size. Click on Create. Create Virtual Hard Disk will open. Allocate the memory. We will be setting the disk type to VDI Select storage on physical hard disk Dynamically allocated . Click create. And that\u2019s it! Your VM is ready for Ubuntu 18.04 server installation. TO download the server image 18.04 on VirtualBox as it is an LTS (Long Term Support) version which is a desirable feature for a CI pipeline. Follow the link What is LTS? It is a product lifecycle management policy in which a stable release of computer software is maintained for a longer period of time than the standard edition. The term is typically reserved for open-source software. Installation steps for Ubuntu Server 18.04.5 I decided to install the Ubuntu Server 18.04.5 because my system was not able to support the Desktop Image. In the VM box I selected the VM to insatll the server. click on Start When the window Select start-up disk window opens click on the folder. A new window opens Optical Disk Selector . Select the server image and click Choose Server image is now selected and click on Start Click on Start Jenkins VM start's running. The installer is designed to be easy to use and have sensible defaults so for a first install you can mostly just accept the defaults for the most straightforward install. Begining with installation: Language selection This screen selects the language and the default language for the installed system. Press the Enter button. Keyboard configuration By default the English (US) layout and variant keyboard is selected. Press the Enter button. Network Configuration of the network is done from here and leave it default if no changes. Select Done and press Enter . Configure proxy The proxy configured on this screen is used for accessing the package repository and the snap store both in the installer environment and in the installed system. Mirror The installer will attempt to use geoip to look up an appropriate default package mirror for location. Guided Storage Configuration I kept the storage default and selected Done . Press Enter button. Storage Configuration Confirm storage configuration. Select continue. Press Enter to begin the installation. Profile Setup Fill the required details. Select Done and press the Enter button. SSH Select the option Install OpenSSH server because by default Ubuntu does not have SSH server installed. It has only SSH client installed. It is very common practice for administrators to SSH into the Ubuntu server so it's better to install the OpenSSH server here only with one click of a button. Select Done and press the Enter button. Snaps If a network connection is enabled, a selection of snaps that are useful in a server environment are presented and can be selected for installation. After that, select Done and press Enter . Installation logs Once the installation is complete, select Reboot . Press Enter . Similarly the second VM can be installed. Here I finished with the installation of Ubuntu 18.04.05(LTS) server.","title":"Setup of VMs"},{"location":"Ubuntu-server-VM-setup/#setting-up-vm","text":"","title":"Setting up VM"},{"location":"Ubuntu-server-VM-setup/#objective","text":"The aim of this section is to set up the required infrastructure to perform the task and solve the 1st point of the problem statement under Task 1. In this section I will be setting up two VMs: 1. For jenkins deployment. 2. For production Server to deploy the application (Odoo) on the server","title":"Objective"},{"location":"Ubuntu-server-VM-setup/#steps-for-creating-vm","text":"Click on the NEW icon to create a new machine. Create Virtual Machine window will open as shown in the picture. Configure * The Name Jenkins-infra. * The Type to Linux. * Version to Ubuntu (64-bit). * Allocate memory size. Click on Create. Create Virtual Hard Disk will open. Allocate the memory. We will be setting the disk type to VDI Select storage on physical hard disk Dynamically allocated . Click create. And that\u2019s it! Your VM is ready for Ubuntu 18.04 server installation. TO download the server image 18.04 on VirtualBox as it is an LTS (Long Term Support) version which is a desirable feature for a CI pipeline. Follow the link What is LTS? It is a product lifecycle management policy in which a stable release of computer software is maintained for a longer period of time than the standard edition. The term is typically reserved for open-source software.","title":"Steps for creating VM:"},{"location":"Ubuntu-server-VM-setup/#installation-steps-for-ubuntu-server-18045","text":"I decided to install the Ubuntu Server 18.04.5 because my system was not able to support the Desktop Image. In the VM box I selected the VM to insatll the server. click on Start When the window Select start-up disk window opens click on the folder. A new window opens Optical Disk Selector . Select the server image and click Choose Server image is now selected and click on Start Click on Start Jenkins VM start's running. The installer is designed to be easy to use and have sensible defaults so for a first install you can mostly just accept the defaults for the most straightforward install. Begining with installation: Language selection This screen selects the language and the default language for the installed system. Press the Enter button. Keyboard configuration By default the English (US) layout and variant keyboard is selected. Press the Enter button. Network Configuration of the network is done from here and leave it default if no changes. Select Done and press Enter . Configure proxy The proxy configured on this screen is used for accessing the package repository and the snap store both in the installer environment and in the installed system. Mirror The installer will attempt to use geoip to look up an appropriate default package mirror for location. Guided Storage Configuration I kept the storage default and selected Done . Press Enter button. Storage Configuration Confirm storage configuration. Select continue. Press Enter to begin the installation. Profile Setup Fill the required details. Select Done and press the Enter button. SSH Select the option Install OpenSSH server because by default Ubuntu does not have SSH server installed. It has only SSH client installed. It is very common practice for administrators to SSH into the Ubuntu server so it's better to install the OpenSSH server here only with one click of a button. Select Done and press the Enter button. Snaps If a network connection is enabled, a selection of snaps that are useful in a server environment are presented and can be selected for installation. After that, select Done and press Enter . Installation logs Once the installation is complete, select Reboot . Press Enter . Similarly the second VM can be installed. Here I finished with the installation of Ubuntu 18.04.05(LTS) server.","title":"Installation steps for Ubuntu Server 18.04.5"},{"location":"contents/","text":"Table of contents The following is the report/documentation for the Problem Statement stated in next section. The contents of the report are: Introduction Contents Problem Statement Setup of VMS Setup of Jenkins MkDocs setup for report","title":"Contents"},{"location":"contents/#table-of-contents","text":"The following is the report/documentation for the Problem Statement stated in next section. The contents of the report are: Introduction Contents Problem Statement Setup of VMS Setup of Jenkins MkDocs setup for report","title":"Table of contents"},{"location":"mkdocs-setup-usage/","text":"MkDocs setup for Report Objective The aim of this section is to create documentation in Markdown and use MkDocs to deploy the documentation generated as a static site in reference to the 3rd point of the problem statement under Task 1. MkDocs is a fast, simple and downright gorgeous static site generator that's geared towards building project documentation. Documentation source files are written in Markdown, and configured with a single YAML configuration file. Installing MkDocs: MkDocs can be installed from this link as it is the official site. I only referred to the 'Installing MkDocs' section under 'Manual Installation' Selecting a Theme MkDocs allows users to use various themes to customize the style and look of the site. I saw the various themes provided from here . I selected the 'Material' theme because I liked the style the way content is displayed. To use this theme with MkDocs, it is required to be installed with pip so, I installed Material theme using the command pip install mkdocs-material ' as mentioned in the official documentation. Getting started with Configuration In the terminal: mkdocs new my-project cd my-project Take a moment to review the initial project that has been created in the VScode. A single configuration file named mkdocs.yml, and a folder named docs that will contain documentation source files. The docs folder just contains a single documentation page, named index.md. MkDocs comes with a built-in dev-server to preview the documentation as we work on it. Start the server in the same directory as the mkdocs.yml configuration file, by running the mkdocs serve command: I opened http://127.0.0.1:8000/ in browser, and saw the default home page being displayed: YAML file mkdocs.yml , be present in the root directory of the project that configures the site structure, site title, pages, themes, etc. It is used to define properties for the site. 1. Theming our documentation Now change the configuration file to alter how the documentation is displayed by changing the theme. Edit the mkdocs.yml file. My : site_name: <DevSecOps> nav: - Introduction: 'index.md' - Contents: 'contents.md' - Problem Statement: 'problem-statement.md' - Setup of VMs: 'Ubuntu-server-VM-setup.md' - Setup of Jenkins: 'Jenkins-installation.md' - MkDocs setup for report: 'mkdocs-setup-usage.md' theme: material site_name: title of the site nav: To add some information about the order, title, and nesting of each page in the navigation header by adding a nav setting. theme: The theme we are using. Depoying the site on github Made a repository on Gitup internship-appsecco and also check the option Initialize this repository with a README and private repository and select Create repository Now in the terminal run: git init git add . git commit -m \"demo1\" git pull origin master --allow-unrelated-histories git commit -m \"merged unrelated hitories\" git push -u origin master I can see that the file is pushed on github To build site folder we will run mkdocs build --clean Similarly add all the changes made in local system in vscode to git and also every time run mkdocs build command before adding the repository. Deploying on Netlify from Github: I deployed the site on github because everytime I make the changes I just have to push it to github and from there the report will be live. Select the option Add new site . Next select option Git it will start showing all repositories. Select the appsecco-internship repository and then in Publish directory column type site/ Click on deploy site. The site will be deployed now and the link will be available on the screen.","title":"MkDocs setup for report"},{"location":"mkdocs-setup-usage/#mkdocs-setup-for-report","text":"","title":"MkDocs setup for Report"},{"location":"mkdocs-setup-usage/#objective","text":"The aim of this section is to create documentation in Markdown and use MkDocs to deploy the documentation generated as a static site in reference to the 3rd point of the problem statement under Task 1. MkDocs is a fast, simple and downright gorgeous static site generator that's geared towards building project documentation. Documentation source files are written in Markdown, and configured with a single YAML configuration file.","title":"Objective"},{"location":"mkdocs-setup-usage/#installing-mkdocs","text":"MkDocs can be installed from this link as it is the official site. I only referred to the 'Installing MkDocs' section under 'Manual Installation'","title":"Installing MkDocs:"},{"location":"mkdocs-setup-usage/#selecting-a-theme","text":"MkDocs allows users to use various themes to customize the style and look of the site. I saw the various themes provided from here . I selected the 'Material' theme because I liked the style the way content is displayed. To use this theme with MkDocs, it is required to be installed with pip so, I installed Material theme using the command pip install mkdocs-material ' as mentioned in the official documentation.","title":"Selecting a Theme"},{"location":"mkdocs-setup-usage/#getting-started-with-configuration","text":"In the terminal: mkdocs new my-project cd my-project Take a moment to review the initial project that has been created in the VScode. A single configuration file named mkdocs.yml, and a folder named docs that will contain documentation source files. The docs folder just contains a single documentation page, named index.md. MkDocs comes with a built-in dev-server to preview the documentation as we work on it. Start the server in the same directory as the mkdocs.yml configuration file, by running the mkdocs serve command: I opened http://127.0.0.1:8000/ in browser, and saw the default home page being displayed: YAML file mkdocs.yml , be present in the root directory of the project that configures the site structure, site title, pages, themes, etc. It is used to define properties for the site. 1. Theming our documentation Now change the configuration file to alter how the documentation is displayed by changing the theme. Edit the mkdocs.yml file. My : site_name: <DevSecOps> nav: - Introduction: 'index.md' - Contents: 'contents.md' - Problem Statement: 'problem-statement.md' - Setup of VMs: 'Ubuntu-server-VM-setup.md' - Setup of Jenkins: 'Jenkins-installation.md' - MkDocs setup for report: 'mkdocs-setup-usage.md' theme: material site_name: title of the site nav: To add some information about the order, title, and nesting of each page in the navigation header by adding a nav setting. theme: The theme we are using.","title":"Getting started with Configuration"},{"location":"mkdocs-setup-usage/#depoying-the-site-on-github","text":"Made a repository on Gitup internship-appsecco and also check the option Initialize this repository with a README and private repository and select Create repository Now in the terminal run: git init git add . git commit -m \"demo1\" git pull origin master --allow-unrelated-histories git commit -m \"merged unrelated hitories\" git push -u origin master I can see that the file is pushed on github To build site folder we will run mkdocs build --clean Similarly add all the changes made in local system in vscode to git and also every time run mkdocs build command before adding the repository.","title":"Depoying the site on github"},{"location":"mkdocs-setup-usage/#deploying-on-netlify-from-github","text":"I deployed the site on github because everytime I make the changes I just have to push it to github and from there the report will be live. Select the option Add new site . Next select option Git it will start showing all repositories. Select the appsecco-internship repository and then in Publish directory column type site/ Click on deploy site. The site will be deployed now and the link will be available on the screen.","title":"Deploying on Netlify from Github:"},{"location":"problem-statement/","text":"Problem Statement Task 1 Setup the infrastructure, required for the task, on 2 virtual machines running locally on a laptop. One VM contains the Jenkins and related infrastructure, and the second VM is for deploying the Odoo using the pipeline. Setup the infrastructure, of Jenkins for basic pipeline setup. Do document extensively in markdown and deploy the documentation in a MkDocs website. Setting up the basic pipeline. Next, the Odoo should get deployed in a server that is the second VM we installed.","title":"Problem Statement"},{"location":"problem-statement/#problem-statement","text":"","title":"Problem Statement"},{"location":"problem-statement/#task-1","text":"Setup the infrastructure, required for the task, on 2 virtual machines running locally on a laptop. One VM contains the Jenkins and related infrastructure, and the second VM is for deploying the Odoo using the pipeline. Setup the infrastructure, of Jenkins for basic pipeline setup. Do document extensively in markdown and deploy the documentation in a MkDocs website. Setting up the basic pipeline. Next, the Odoo should get deployed in a server that is the second VM we installed.","title":"Task 1"}]}